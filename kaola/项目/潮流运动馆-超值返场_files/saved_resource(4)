var _ACT_=_ACT_||{};_ACT_.components=_ACT_.components||{},_ACT_.components["components/reg_1005_goods/pc/index"]=webpackJsonp([28],{261:function(module,exports){},326:function(module,exports){module.exports='{#if dataMap && dataMap.list && dataMap.list.length} <section class="m-goods1005-panel"> <ul class="goods-list f-cb"> {#list dataMap.list as goods} <li class="g-col {@(showStyleMap.colClassName)}"> <div class="goods-bd"> <div class="goods-bd-border" style="border: 1px solid {moduleInfo.configMap.bgColor};"> <div class="goods-img"> <a href="{@(goods.content.goodsLink)}" target="_blank"> <img class="img" src="{blankGif}" data-src="{(goods.content.goodsConfigMap.imageUrl||goods.content.imageUrl)|thumbnail:showStyleMap.imgWidth,showStyleMap.imgHeight}" /> {#if goods.content.actualStorageStatus === 0} <i class="u-soldout">已抢光</i> {/if} </a> <GoodsTagTr goods="{@(goods.content)}" config="{configMap}"></GoodsTagTr> {#if (goods.content.promoStatus == 2 || goods.content.promoStatus == 3)} {#if promotionStatus == \'10\' && this.isPrepriceLessThanNewUserPrice(goods.content)} <GoodsPromotion goods="{@(goods.content)}" pcShowStyle="{configMap.pcShowStyle}" vip={vip} isNewUser={isNewUser}/> {/if} {#if promotionStatus == \'11\' && configMap.pcShowStyle == \'1x4\'} {#if goods.content.advancePrice && !this.isPreBuyForVip(goods.content) && this.isPrepriceLessThanNewUserPrice(goods.content)} <GoodsBlackPromotion goods="{@(goods.content)}" vip={vip}></GoodsBlackPromotion> {#elseif !this.isPreBuyForVip(goods.content) && (!vip || this.isPrepriceLessThanNewUserPrice(goods.content))} <GoodsBlack goods="{@(goods.content)}" vip={vip}></GoodsBlack> {/if} {/if} {#if promotionStatus == \'01\' && !this.isPreBuyForVip(goods.content) && (!vip || this.isPrepriceLessThanNewUserPrice(goods.content))} <GoodsBlack goods="{@(goods.content)}"></GoodsBlack> {/if} {#else} <GoodsTagBottomOne goods="{@(goods.content)}" /> <GoodsTagBottomTwo goods="{@(goods.content)}" config="{configMap}" isNewUser={isNewUser}/> {#if configMap.showPromotionTag && !this.isPreBuyForVip(goods.content) && this.isPrepriceLessThanNewUserPrice(goods.content)} <GoodsPromotionTag goods="{@(goods.content)}" /> {/if} {/if} </div> <h5 class="goods-title"> <a href="{@(goods.content.goodsLink)}" target="_blank">{goods.content.goodsConfigMap.title || goods.content.title}</a> </h5> <h6 class="goods-introduce"> {#if this.isVipPreBuy(goods.content)} <img class="vip-icon" src="{goods.content.vipPreBuy.vipPreImgPC}" /> {/if} {goods.content.introduce} </h6> <GoodsPrice isNewUser={isNewUser} isVipUser={vip} config={priceConfig} goods={goods.content} priceColor={configMap.priceColor||\'\'} isShowNewUserPrePriceName={goods.content.promoStatus == 2 || goods.content.promoStatus == 3} /> {#if actionType && this.allowActionType(actionType+\'\') && !(goods.content.actualStorageStatus === 0)} <a on-click={this.doAction(actionType, goods_index)} href="javascript:;" class="goods-btn" > {#if actionType == ACTION_TYPE.FAVOR} {#if goods.favorState === \'favored\'} <span class="goods-btn-span" style="background-color: {configMap.priceColor || \'\'}" >已收藏</span> {#else} <img class="goods-btn-img" src="https://haitao.nos.netease.com/5dd01025-0694-4ea7-81a7-fa42d14462c8_81_81.png" alt="收藏"> {/if} {#elseif actionType == ACTION_TYPE.CART} <img class="goods-btn-img" src="https://haitao.nos.netease.com/69b9a188-c930-4d98-984b-33d7ef847916_81_81.png" alt="加购物车"> {#elseif actionType == ACTION_TYPE.JUMP} <span class="goods-btn-span" style="background-color: {configMap.priceColor || \'\'}" >立即购买</span> {/if} </a> {/if} </div> </div> </li> {/list} </ul> </section>\n{/if}'},612:function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(261);var _base=__webpack_require__(78),_base2=_interopRequireDefault(_base),_view=__webpack_require__(326),_view2=_interopRequireDefault(_view),_tools=__webpack_require__(3),_index=__webpack_require__(10),_index2=__webpack_require__(15),LIST_COL_CLASS_MAPPING={"1x3":{colClassName:"col-1x3",imgWidth:327,imgHeight:327,linePerSize:3},"1x4":{colClassName:"col-1x4",imgWidth:244,imgHeight:244,linePerSize:4},"1x5":{colClassName:"col-1x5",imgWidth:194,imgHeight:194,linePerSize:5}},GoodsList=_base2.default.extend({template:_view2.default,config:function(data){var moduleIndex=data.extendMap.moduleIndex,moduleInfo=window._ACT_.frameData.moduleList[moduleIndex];if(this.supr(data),data=_tools.util.defaults(data,{defaultColor:"#d22147",vip:!1,isVipShow:!1,isNewUser:!0,moduleInfo:moduleInfo}),!data.isRegionNotValid){this.$goodsAction=_index2.actionModule;var _data=data,configMap=_data.configMap;data.actionType=this.$goodsAction.$getActionDataMap(configMap).actionType,configMap.pcShowStyle=configMap.pcShowStyle||"1x5",data.dataMap.list.forEach(function(goods){goods.favorState="nofavor"}),data.showStyleMap=LIST_COL_CLASS_MAPPING[configMap.pcShowStyle],this.setGoodsLink(),data.dataMap.list=_tools.util.getRoundList(data.dataMap.list,data.showStyleMap.linePerSize),data.vip=window.__vip,data.isNewUser=!(window.__userInfo&&window.__userInfo.isOldUser),this.changePromotionData(configMap),data.promotionStatus=this.promotionStatus(),data.priceConfig={isAfterSwitchTime:this.isAfterSwitchTime(configMap.switchTime,window._ACT_.systemTime),afterPrePriceName:configMap.afterPrePriceName,beforePrePriceName:configMap.beforePrePriceName},this.$update()}},changePromotionData:function(configMap){configMap.showPromotionTagStyle&&(1==configMap.showPromotionTagStyle?(configMap.showPromotionTag=!1,configMap.showAdvanceBlackCardPrice=!1):2==configMap.showPromotionTagStyle?(configMap.showPromotionTag=!0,configMap.showAdvanceBlackCardPrice=!1,configMap.showHotSaleTag=!1,configMap.showActivityTag=!1,configMap.beforeActivityTag=void 0,configMap.afterActivityTag=void 0):3==configMap.showPromotionTagStyle?(configMap.showPromotionTag=!1,configMap.showAdvanceBlackCardPrice=!0):4==configMap.showPromotionTagStyle&&(configMap.showPromotionTag=!0,configMap.showAdvanceBlackCardPrice=!0))},promotionStatus:function(){var configMap=this.data.configMap;return showPromotionTag=0,showAdvanceBlackCardPrice=0,configMap.showPromotionTag&&(showPromotionTag=1),configMap.showAdvanceBlackCardPrice&&(showAdvanceBlackCardPrice=1),""+showPromotionTag+showAdvanceBlackCardPrice},isPrepriceLessThanNewUserPrice:function(goods){var _ref=goods||{},newUserPrice=_ref.newUserPrice,advanceBlackPrice=_ref.advanceBlackPrice,advancePrice=_ref.advancePrice,_data2=this.data,vip=_data2.vip,isNewUser=_data2.isNewUser,preprice=vip?advanceBlackPrice||advancePrice:advancePrice;return!(newUserPrice&&preprice&&isNewUser&&preprice>=newUserPrice)},doAction:function(actionType,goodsIndex){if(2!=actionType||"favored"!=this.data.dataMap.list[goodsIndex].favorState){var options={actionType:actionType,goodsInfo:this.data.dataMap.list[goodsIndex].content,cbDoFavor:this.cbDoFavor.bind(this,goodsIndex),cbAddCart:this.cbAddCart.bind(this,goodsIndex)};this.$goodsAction.$doAction(options)}},cbDoFavor:function(goodIndex){this.data.dataMap.list[goodIndex].favorState="favored",this.$update()},cbAddCart:function(){},getRegionNotValid:function(data){return!data||!data.dataMap||!data.dataMap.list||data.dataMap.list.length<1}});GoodsList.component("GoodsPrice",_index.GoodsPrice),GoodsList.component("GoodsTagBottomOne",_index.GoodsTagBottomOne),GoodsList.component("GoodsTagBottomTwo",_index.GoodsTagBottomTwo),GoodsList.component("GoodsPromotionTag",_index.GoodsPromotionTag),GoodsList.component("GoodsPromotion",_index.GoodsPromotion),GoodsList.component("GoodsTopTag",_index.GoodsTopTag),GoodsList.component("GoodsBlack",_index.GoodsBlack),GoodsList.component("GoodsBlackPromotion",_index.GoodsBlackPromotion),GoodsList.component("GoodsTagTr",_index.GoodsTagTr),exports.default=GoodsList},78:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var _regionBaseComp=__webpack_require__(2),_regionBaseComp2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_regionBaseComp),_constant=__webpack_require__(11),CONST=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_constant),TYPE_MAP=CONST.GOODS_ACTION_TYPE_MAP||{},ALLOW_ACTION_TYPES=[""+TYPE_MAP.FAVOR,""+TYPE_MAP.CART,""+TYPE_MAP.JUMP],Goods=_regionBaseComp2.default.extend({config:function(data){this.supr(data),data.ACTION_TYPE=TYPE_MAP},getRegionNotValid:function(data){return!data||!data.dataMap||!data.dataMap.list||data.dataMap.list.length<1},setGoodsLink:function(){var _this=this,data=this.data,_data$extendMap=data.extendMap,source=_data$extendMap.source,pageId=_data$extendMap.pageId,rIdForStatis=_data$extendMap.rIdForStatis;(data.dataMap.list||[]).forEach(function(item,index){var link=_this.getBaseGoodsLink(item.content.goodsId);item.content.goodsLink=_this.addTrackLink({link:link,source:source,pageId:pageId,rIdForStatis:rIdForStatis,scm:item.statistic.scm||"",index:index+1})})},allowActionType:function(){var actionType=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!=ALLOW_ACTION_TYPES.indexOf(""+actionType)}});exports.default=Goods}},[612]);
var _ACT_=_ACT_||{};_ACT_.components=_ACT_.components||{},_ACT_.components["components/reg_20001_brand/pc/index"]=webpackJsonp([24],{270:function(module,exports){},335:function(module,exports){module.exports='{#if dataMap.list && dataMap.list.length > 0}\n<dl class="m-brand m-brand-pc {@(styleClass)}"> {#list dataMap.list as bi} {#if bi.content && bi.content.brandId} <dd class="m-branditem" > <a class="m-brandin" href={this.addTrackLink({ link: this.getBaseBrandLink(bi.content.brandId, bi.content.brandConfigMap.url||\'\'), source: extendMap.source, pageId: extendMap.pageId, rIdForStatis: extendMap.rIdForStatis, scm: bi.statistic.scm||\'\', index: bi_index+1 })}> <div class="m-imgbox"> <img title="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" alt="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" src="{blankGif}" data-src="{(bi.content.img||\'\')|thumbnail:imgWidth, imgHeight}" class="u-img-brand"> {#if detailMap.configMap.promotionSwitch} <img title="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" alt="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" src="{blankGif}" data-src="{(bi.content.brandConfigMap.promoImgUrl||\'\')|thumbnail:nationImgWidth, nationImgHeight}" class="u-img-promo"> {/if} </div> <div class="m-desc {@(descClassName||\'\')}" style="{ { \'background-color\': detailMap.configMap.benefitBgColor||\'\' } | json2style }"> <img title="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" alt="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" src="{blankGif}" data-src="{(bi.content.logo||\'\')|thumbnail:logoImgWidth, logoImgHeight}" class="u-img-logo"> <div class="nation-brand"> {#if detailMap.configMap.countrySwitch} <img title="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" alt="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" src="{blankGif}" data-src="{(bi.content.countryImg||\'\')|thumbnail:logoImgWidth, logoImgHeight}" class="u-img-nation"> {/if} <p class="u-txt-name f-ellipsis" title="{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}" style="{ { \'color\': detailMap.configMap.brandNameColor || \'\' } | json2style }">{@(bi.content.brandConfigMap.name||bi.content.name||\'\')}</p> </div> <p class="u-txt-bpt f-ellipsis" title="{@(bi.content.brandConfigMap.benefit||bi.content.brandConfigMap.sellPoint||\'\')}" style="{ { \'color\': detailMap.configMap.actionBtnColor || \'\' } | json2style }" >{@(bi.content.brandConfigMap.benefit||bi.content.brandConfigMap.sellPoint||\'\')} {#if !detailMap.configMap.showActionPoint}<b>&#xe683;</b> {/if} </p> {#if detailMap.configMap.showActionPoint} <p class="u-action f-ellipsis" style="{ { \'background-color\': detailMap.configMap.actionBtnColor || \'#E51336\', \'color\': detailMap.configMap.actionTextColor || \'\' } | json2style }" >{@(detailMap.configMap.actionBtnName)}</p> {/if} </div> {#if bi.content.factoryTag} <span class="u-tag u-tag-factory"></span> {#else} {#if bi.content.tagText} <div class="u-tag"><p>{bi.content.tagText|cvtTag}</p></div> {/if} {/if} </a> </dd> {/if} {/list}\n</dl>\n{/if}'},621:function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(270);var _base=__webpack_require__(80),_base2=_interopRequireDefault(_base),_view=__webpack_require__(335),_view2=_interopRequireDefault(_view),_tools=__webpack_require__(3),showWays={"1x3":{styleType:"1x3",lineNum:3,imgWidth:328,imgHeight:328,logoImgWidth:102,logoImgHeight:102,nationImgWidth:72,nationImgHeight:48},"1x4":{styleType:"1x4",lineNum:4,imgWidth:244,imgHeight:244,logoImgWidth:82,logoImgHeight:82,nationImgWidth:72,nationImgHeight:48},"1x5":{styleType:"1x5",lineNum:5,imgWidth:194,imgHeight:194,logoImgWidth:64,logoImgHeight:64,nationImgWidth:72,nationImgHeight:48}},Brand=_base2.default.extend({template:_view2.default,config:function(data){if(this.supr(data),data.isRegionNotValid)return void(data.dataMap.list=[]);var pcShowWay=(data.detailMap.configMap.pcShowWay||"").toLowerCase(),showObj=showWays[pcShowWay]||{};_tools.util.defaults(data,showObj),data.styleClass="m-brand-pc-"+(showObj.styleType||"1x4"),data.descClassName=data.detailMap.configMap&&data.detailMap.configMap.showActionPoint?"m-desc-anim":"";var num=parseInt(pcShowWay.split("x")[1]),list=data.dataMap.list||[];data.dataMap.list=_tools.util.getRoundList(list,num)},getRegionNotValid:function(data){var pcShowWay=(data.detailMap.configMap.pcShowWay||"").toLowerCase(),num=parseInt(pcShowWay.split("x")[1]);return!data||!data.dataMap||!data.dataMap.list||data.dataMap.list.length<num}});exports.default=Brand},80:function(module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0});var _regionBaseComp=__webpack_require__(2),_regionBaseComp2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_regionBaseComp),BaseBrand=_regionBaseComp2.default.extend({getRegionNotValid:function(data){return!data||!data.dataMap||!data.dataMap.list||data.dataMap.list.length<1}});BaseBrand.filter({cvtTag:function(tag){return tag&&"string"==typeof tag?tag.replace(/(\r?\n)|-/g,"<br>"):tag}}),exports.default=BaseBrand}},[621]);
var _ACT_=_ACT_||{};_ACT_.components=_ACT_.components||{},_ACT_.components["components/reg_10001_img_hotarea/pc/index"]=webpackJsonp([53],{251:function(module,exports){},316:function(module,exports){module.exports='{#if dataMap && dataMap.content && dataMap.content.info && dataMap.content.info.image}\n{#if bgWidth && bgHeight}\n<div class="m-zoneimage"> <div class="item"> <div style="height:{bgHeight}px;"> <div class="imgwrap" ref="imgBg" data-bg-fix="{dataMap.content.info.image|thumbnail:bgWidth,bgHeight}" data-src-background="{dataMap.content.info.image|thumbnail:bgWidth,bgHeight}" style="width:{imgWrapWidth}px;margin-left:-{marginLeft}px;background-size:{bgWidth}px {bgHeight}px;{imgBgFix}"></div> </div> {#if dataMap.content.settings} {#list dataMap.content.settings as x} {#if x.type == 1 && x.redeemCode} <div class="hotarea" on-click={this.onGetCoupon(x,extendMap,x_index+1)} style="top:{x.topPer*100}%;left:{x.leftPer*100}%;width:{x.widthPer*100}%;height:{x.heightPer*100}%;"></div> {#elseif x.type == 0 && x.link} <a class="hotarea" href={this.addTrackLink({ link: x.link, source: extendMap.source, pageId: extendMap.pageId, rIdForStatis: extendMap.rIdForStatis, scm: scm, index: x_index+1 })} target="{x.target == 1 ? \'_blank\' : \'_self\'}" style="top:{x.topPer*100}%;left:{x.leftPer*100}%;width:{x.widthPer*100}%;height:{x.heightPer*100}%;"></a> {#elseif x.type == 2 && x.goodsId} <a class="hotarea" href={this.addTrackLink({ link: this.getBaseGoodsLink(x.goodsId), source: extendMap.source, pageId: extendMap.pageId, rIdForStatis: extendMap.rIdForStatis, scm: scm, index: x_index+1 })} target="_blank" style="top:{x.topPer*100}%;left:{x.leftPer*100}%;width:{x.widthPer*100}%;height:{x.heightPer*100}%;"></a> {/if} {/list} {/if} </div>\n</div>\n{/if}\n{/if}'},602:function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(251);var _regionBaseComp=__webpack_require__(2),_regionBaseComp2=_interopRequireDefault(_regionBaseComp),_view=__webpack_require__(316),_view2=_interopRequireDefault(_view),_tools=__webpack_require__(3),_index=__webpack_require__(15),PCImgHotArea=_regionBaseComp2.default.extend({template:_view2.default,config:function(data){var _this=this;if(this.supr(data),data=_tools.util.defaults(data,{}),!data.isRegionNotValid){var dataMap=data.dataMap,content=dataMap.content||{};content.info=content.pcImgInfo||{},content.settings=content.pcSettings||[],data.imgBgFix="",data.bgWidth=content.info.width,data.bgHeight=content.info.height,this.setBgDimension(),dataMap.statistic&&dataMap.statistic.scm&&(data.scm=dataMap.statistic.scm),this.$on("$inject",function(){var $imgBg=_this.$refs&&_this.$refs.imgBg||{},bgSrc="function"===_tools.util.typeOf($imgBg.getAttribute)?$imgBg.getAttribute("data-bg-fix"):"";window.addEventListener("resize",_tools.util.throttle(function(){bgSrc&&!_this.data.imgBgFix&&(_this.data.imgBgFix="background-image:url('"+bgSrc+"');"),_this.setBgDimension(!0)},100))})}},setBgDimension:function(){var forceUpdate=arguments.length>0&&void 0!==arguments[0]&&arguments[0],data=this.data,content=data.dataMap.content,info=content.info||{};data.imgWrapWidth=info.width>1e3?document.body.clientWidth||window.innerWidth:info.width,data.marginLeft=data.imgWrapWidth/2,forceUpdate&&this.$update()},getRegionNotValid:function(data){return!(data&&data.dataMap&&data.dataMap.content&&data.dataMap.content.pcImgInfo&&data.dataMap.content.pcImgInfo.image)},onGetCoupon:function(coupon,extendMap,index){if((coupon||{}).redeemCode){var redeemCode=coupon.redeemCode,hasCouponLink=this.checkCouponLink(coupon);if(hasCouponLink){var source=extendMap.source,pageId=extendMap.pageId,rIdForStatis=extendMap.rIdForStatis;coupon.couponLink=this.addTrackLink({link:coupon.couponLink,source:source,pageId:pageId,rIdForStatis:rIdForStatis,scm:this.data.scm,index:index}),_index.couponModule.$onGetCoupon({redeemCode:redeemCode,hasCouponLink:hasCouponLink,cbGetCoupon:this.cbGetCoupon.bind(this,coupon)})}else _index.couponModule.$onGetCoupon({redeemCode:redeemCode})}},checkCouponLink:function(coupon){if(coupon.couponLink){return coupon.couponLink.split(/\/([^\/]*)\.(html|shtml)/)[1]!=location.href.split(/\/([^\/]*)\.(html|shtml)/)[1]}},cbGetCoupon:function(coupon,res){res&&-12==res.code&&(window.location.href=coupon.couponLink)}});exports.default=PCImgHotArea}},[602]);
var _ACT_=_ACT_||{};_ACT_.components=_ACT_.components||{},_ACT_.components["components/reg_30002_nav/pc/index"]=webpackJsonp([43],{278:function(module,exports){},343:function(module,exports){module.exports='{#if dataMap && dataMap.content && dataMap.content.pcInfo && navList && navList.length > 0}\n<aside ref="navPanel" class="m-sidebar" style="background-color:{bgColor||defaultColor};top:{configMap.topSpace||defaultTopSpace}px;" r-class={{\'hide\':isHide}}> <ul class="m-navlist"> <li> <a href="//{DOMAIN_CART}/cart.html" class="topPart" target="_blank" r-style={{ \'color\': configMap.pcTxtColor, \'background-color\': configMap.pcBgColor }} > <span class="u-iconfont u-iconfont-cart-2"></span><span class="icontext">购物车</span> {#if cartNum && cartNum < 0} <span class="cartnum">{#if cartNum > 99}99+{#else}{cartNum}{/if}</span> {/if} </a> </li> {#list navList as x} {#if x.name} <li r-style={{\'background-color\': configMap.pcBgColor}}> <a title={x.name} class="nav-item" href="#module_{x.id}" on-click={this.selectNavItem(x_index)} r-style={{\'color\': configMap.pcTxtColor}} r-class={{\'z-selected\': x_index === selectedItemIndex}} >{x.name}</a> </li> {/if} {/list} {#if navList.length > 0} <li> <a href="#top" class="bottomPart" on-click={selectedItemIndex = -1} r-style={{ \'color\': configMap.pcTxtColor, \'background-color\': configMap.pcBgColor }} ><b>&#xe624;</b>TOP</a> </li> {/if} </ul>\n</aside>\n{/if}'},629:function(module,exports,__webpack_require__){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _assign=__webpack_require__(8),_assign2=_interopRequireDefault(_assign);__webpack_require__(278);var _regionBaseComp=__webpack_require__(2),_regionBaseComp2=_interopRequireDefault(_regionBaseComp),_view=__webpack_require__(343),_view2=_interopRequireDefault(_view),_tools=__webpack_require__(3),_constant=__webpack_require__(11),CONST=function(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}(_constant),NavTab=_regionBaseComp2.default.extend({template:_view2.default,config:function(data){var _this=this;if(this.supr(data),data.dataMap&&data.dataMap.content){var frameData=window._ACT_.frameData||{},moduleList=frameData.moduleList||[];(0,_assign2.default)(data,{defaultTopSpace:200,navList:this.getNavList(moduleList),bgColor:this.getBgColor(moduleList),defaultColor:"#282728",isHide:!0,DOMAIN_CART:CONST.DOMAIN_CART}),(0,_assign2.default)(data.configMap,{topSpace:data.configMap.topSpace||200,pcTxtColor:data.configMap.pcTxtColor||"#fff",pcBgColor:data.configMap.pcBgColor||"#F68383",showNavIndex:Math.floor(data.configMap.showNavIndex||0)||0}),data.configMap.topSpace<170&&(data.configMap.topSpace=170),data.configMap.showNavIndex<0&&(data.configMap.showNavIndex=0),data.navList.length>0&&(this.getCartNum(),this.onResize(),this.onScroll(),_tools.dom.on(window,"scroll",_tools.util.debounce(this.onScroll.bind(this),200,!1)),_tools.dom.on(window,"resize",_tools.util.debounce(this.onResize.bind(this),200,!1)),_tools.eventEmitter.$on("updateCartNum",this.updateCartNum.bind(this)),_tools.eventEmitter.$on("isRegionNotValid",function(moduleIndex){var id=moduleList[moduleIndex].id,list=_this.data.navList.filter(function(item){return item.id!=id});_this.data.navList=list,_this.onResize(),_this.onScroll(),_this.$update()}))}},selectNavItem:function(index){this.data.selectedItemIndex=index},getNavList:function(moduleList){var data=this.data,info=JSON.parse(data.dataMap.content.pcInfo||"{}"),navList=[];return moduleList.forEach(function(item){var id=item.id;id&&info[id]&&info[id].selected&&(data.requestSource===info[id].allowType||0==info[id].allowType)&&(info[id].id=id,navList.push(info[id]))}),navList},getBgColor:function(){var moduleList=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],moduleIndex=this.data.extendMap.moduleIndex,moduleData=moduleList[moduleIndex];if(moduleData&&moduleData.configMap)return moduleData.configMap.bgColor||""},getCartNum:function(){var _this2=this;_tools.fetchUtil.$request("/pages/cartAjax/getCartNum.html",{method:"GET"}).then(function(cbdata){cbdata&&cbdata.success&&cbdata.data&&(_this2.data.cartNum=cbdata.data,window._ACT_.cartNum=cbdata.data,_this2.$update())})},onScroll:function(){for(var scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,topList=(this.data.navList||[]).map(function(){var navItem=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},element=_tools.dom.id("module_"+navItem.id)||{},marginTop=parseInt(element.style.marginTop,10)||0;return(element.offsetTop||0)-marginTop}),i=topList.length-1;i>=0;i--){if(scrollTop>=topList[i]-5){this.selectNavItem(i),this.$update();break}0===i&&(this.selectNavItem(-1),this.$update())}this.judgeIsHideOfScroll(scrollTop)},onResize:function(){var winWidth=_tools.dom.getWindowWidth();this.data.isHide=winWidth<1200,this.$update()},judgeIsHideOfScroll:function(scrollTop){var _data=this.data,navList=_data.navList,configMap=_data.configMap,isHide=!(navList&&navList.length);if(!isHide){var moduleIndex=configMap.showNavIndex>=navList.length?navList.length-1:configMap.showNavIndex,module=navList[moduleIndex];isHide=scrollTop<(_tools.dom.id("module_"+module.id)||{}).offsetTop}if(!isHide){var docFooterEle=this.docFooterEle,docFooterOffsetTop=void 0;docFooterEle||(docFooterEle=this.docFooterEle=_tools.dom.id("docFoot")),docFooterEle&&this.$refs&&this.$refs.navPanel&&(docFooterOffsetTop=docFooterEle.offsetTop||0,isHide=scrollTop+configMap.topSpace+this.$get("navHeight")>docFooterOffsetTop)}this.data.isHide=isHide,this.$update()},updateCartNum:function(cartNum){this.data.cartNum=cartNum||0,window._ACT_.cartNum=cartNum,this.$update()},computed:{navHeight:{get:function(data){var _data$navList=data.navList;return 36+26*(void 0===_data$navList?[]:_data$navList).length+36}}}});exports.default=NavTab}},[629]);